const DEBUG=!1;!function(){const t=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(e,o){return this._url="string"==typeof o?o:null,t.apply(this,arguments)};const e=XMLHttpRequest.prototype.send;function o(t,e){const o=[];return function t(n,s){if(Array.isArray(n))n.forEach(((e,o)=>{t(e,`${s}[${o}]`)}));else if("object"==typeof n&&null!==n)for(const r in n){const l=s?`${s}.${r}`:r;r===e&&o.push({path:l,value:n[r]}),t(n[r],l)}}(t,""),o}XMLHttpRequest.prototype.send=function(){return this.addEventListener("load",(function(){try{if(this._url&&this._url.includes("/api/graphql")){(this.responseText?.split("\n")||[]).forEach((t=>{try{const e=JSON.parse(t),n=e?.data?.node||e?.data?.viewer?.news_feed?.edges?.[0]?.node;if(n){n.actors?.[0]?.name||n.title;false;const t=function(t){const e=[],n=t?.daspo_sto||t?.sponsored_data||t?.storySponsoredContext;if(!n)return e;const s=n,r=t.actors?.[0]||{},l=t.comet_sections?.content||t.comet_sections?.message,a=l?.story?.message.text,c=l?.story?.wwwURL,i=l.story?.attachments?.[0]?.styles?.attachment?.cta_screen_renderer?.action_link,u=l.story?.attachments?.[0]?.comet_footer_renderer?.attachment?.call_to_action_renderer?.action_link,p=t.comet_sections?.context_layout?.story?.comet_sections?.actor_photo?.story?.actors?.[0]?.profile_picture;return e.push({advertiserId:s.lbl_adv_iden||s.ad_id,advertiserToken:s.client_token,postId:t.post_id,message:a||null,ctaSectionUrl:i?.url||null,footerCtaSectionUrl:u?.url||null,profile_picture:p?.uri||null,callToAction:i?.title||null,username:r.name||null,userProfileUrl:r.url||null,userId:r.id||null,videoUrl:c||null,urls:o(t,"url")||null,postImg:o(t,"flexible_height_share_image")||null}),e}(n);t.length>0&&window.postMessage({type:"FBA",ads:t},"*")}}catch(t){false}}))}}catch(t){console.warn("‚ùå XHR processing error:",t)}})),e.apply(this,arguments)}}();