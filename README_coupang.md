# 쿠팡 크롤링 도구 개발 과정

## 개발 요약
쿠팡의 강력한 봇 차단을 우회하여 상품 검색 및 데이터 추출이 가능한 크롤링 도구를 개발했습니다.

## 주요 도전과제
1. **HTTP/2 프로토콜 오류** - 쿠팡 서버에서 발생하는 네트워크 차단
2. **봇 감지 시스템** - 강력한 자동화 감지 및 차단
3. **동적 페이지 구조** - JavaScript로 동적 로딩되는 상품 요소들
4. **인코딩 문제** - 한글 파일명 및 로그 출력 문제

## 해결 전략

### 1단계: 기본 봇 감지 우회
- `webdriver` 속성 제거
- `chrome` 객체 정의
- User-Agent 수정
- 다양한 브라우저 플래그 사용

### 2단계: 네트워크 차단 우회
- HTTP/1.1 강제 사용 (`--disable-http2`)
- QUIC 프로토콜 비활성화 (`--disable-quic`)
- SSL 오류 무시
- 다양한 타임아웃 설정

### 3단계: 성공한 방법
- **기본 브라우저 설정**: 특별한 플래그 없이 일반 브라우저처럼 실행
- **단계적 접근**: 메인 페이지 → 검색창 → 검색 실행
- **충분한 대기시간**: 각 단계마다 적절한 지연

## 파일 구조

### 개발 버전들
1. `coupang_crawler.py` - 초기 다중 전략 버전
2. `coupang_crawler_v2.py` - 상품 추출 로직 강화
3. `coupang_crawler_v3.py` - 직접 URL 접근 시도
4. `coupang_crawler_v4.py` - 네트워크 우회 전략
5. `coupang_crawler_simple.py` - 간단한 테스트 (성공)
6. `coupang_final.py` - 최종 작동 버전

### 핵심 기능
- **상품 검색**: 키워드 기반 검색
- **데이터 추출**: 상품명, 가격, 이미지, 링크, 배송비
- **결과 저장**: JSON 형태로 저장
- **HTML 디버깅**: 페이지 소스 저장

## 성공 요인
1. **단순함**: 복잡한 우회 기법보다 기본적인 접근이 효과적
2. **인내심**: 충분한 대기 시간 제공
3. **다중 셀렉터**: 다양한 CSS 셀렉터로 상품 요소 찾기
4. **점진적 개선**: 단계별로 문제 해결

## 현재 상태
- ✅ 쿠팡 메인 페이지 접속 성공
- ✅ 검색 기능 작동 확인
- ✅ 검색 결과 페이지 도달
- 🔄 상품 데이터 추출 테스트 중

## 향후 개선 방향
1. **상품 추출 정확도 향상**
   - 더 정확한 CSS 셀렉터 식별
   - 동적 로딩 처리 개선

2. **안정성 향상**
   - 재시도 로직 추가
   - 오류 처리 강화

3. **기능 확장**
   - 무한 스크롤 처리
   - 다중 페이지 크롤링
   - 엑셀 키워드 연동

## 주의사항
- 쿠팡의 서비스 약관 준수 필요
- 과도한 요청으로 인한 차단 가능성
- 사이트 구조 변경 시 셀렉터 업데이트 필요

## 사용법
```python
python coupang_final.py
```

브라우저가 자동으로 열리며 쿠팡에 접속하여 상품 검색을 수행합니다.
결과는 JSON 파일로 저장되며, 디버깅용 HTML 파일도 함께 생성됩니다.